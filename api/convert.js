(()=>{try{var raw=(q||"").replace(/\uFEFF/g,"").trim();if(!raw)throw 1;var parts=raw.split(/\s*(?:◆|\||;|\/)\s*/).map(s=>s.trim().toLowerCase());if(parts.length<11)throw 1;var g=i=>parts[i]||"", normYN=v=>v==="y"?"yes":v==="n"?"no":v, yn=v=>["yes","y","no","n"].includes(v);var zv=normYN(g(0)),baby=normYN(g(1)),jockey=normYN(g(2)),armor=normYN(g(3)),ap=g(4),ae=g(5),at=g(6),loot=g(7),we=normYN(g(8)),hand=g(9),pk=g(10);if(!yn(zv)||!yn(baby)||!yn(jockey)||!yn(armor))throw 1;if(armor==="yes"){if(!["1","2","3","4"].includes(ap)||!["0","1","2","3","4"].includes(ae)||!["l","co","ch","i","g","d"].includes(at))throw 1;}else{ap="0";ae="0";at="x";}if(!["sword","shovel","can pick up","none"].includes(loot))throw 1;if(loot!=="none"&&loot!=="can pick up"){if(!yn(we))throw 1;we=(we==="y"?"yes":we);}else we="no";if(!["r","l",""].includes(hand))throw 1;if(!["carved","lantern","x"].includes(pk))throw 1;var p=0.1845;p*=(zv==="yes"?0.05:0.95);p*=(baby==="yes"?0.05:0.95);p*=(jockey==="yes"?0.05:0.95);p*=(armor==="yes"?0.15:0.85);var piecesProb={"1":1,"2":0.9,"3":0.81,"4":0.729};if(armor==="yes")p*=piecesProb[ap]||0;function comb(n,k){if(k<0||k>n)return 0;var c=1;for(var i=0;i<k;i++){c*=(n-i);c/=(i+1);}return c;}var pieces=parseInt(ap,10),enchCount=parseInt(ae,10);if(armor==="yes"){var pe=comb(pieces,enchCount)*Math.pow(0.5,pieces);p*=pe;var atypes={l:0.236,co:0.3223,ch:0.0973,g:0.3329,i:0.011,d:0.0004};p*=atypes[at]||0;}if(loot==="sword"||loot==="shovel"){p*=0.05;if(we==="yes")p*=1.25;}else if(loot==="can pick up"){p*=0.55;}if(hand==="l"&&(loot==="sword"||loot==="shovel"||loot==="can pick up"))p*=0.11;if(pk==="carved")p*=0.225;else if(pk==="lantern")p*=0.025;if(p<=0)throw 1;var denom=Math.round(1/p);var pct=(p*100).toExponential(6).replace("E","e");return "Your naturally spawned zombie rarity in max local difficulty is 1/"+denom+" ("+pct+"%)";}catch(e){return "Wrong input. Use: !zr yes/no◆yes/no◆... See twitch.tv/hassannm7";}})()
